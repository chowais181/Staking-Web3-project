<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/Token.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> Token.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">24% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>6/25</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">19.23% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>10/52</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">33.33% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>6/18</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">35.71% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>15/42</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.13;
interface IERC721Receiver {
    function onERC721Received(
        address operator,
        address from,
        uint tokenId,
        bytes calldata data
    ) external returns (bytes4);
}
contract erc721{
// string Name;
// string Symbol;
//events
event Transfer(address indexed from, address indexed to, uint indexed id);
event Approval(address indexed owner, address indexed spender, uint indexed id);
event ApprovalForAll(
    address indexed owner,
    address indexed operator,
    bool approved
);
//to store owners
mapping (uint =&gt; address) OwnerIs;
//return no. of NFTs owned by a particular addres
mapping (address =&gt; uint) BalanceIs;
//return bool, is an operator or sender is allowed by owner
mapping (address =&gt; mapping(address =&gt; bool)) isApprovedbyOwnerForAll;
/// approved addresses by owner
mapping (uint =&gt; address) approved;
///return url which cootains data about any particular NFT ,(which is any IPFS url that returns NFT metadata.)
mapping (uint =&gt; string) TokenMetaData;
&nbsp;
// constructor(string memory _name, string memory _symbol){
//     Name = _name;
//     Symbol = _symbol;
// }
&nbsp;
constructor(){
&nbsp;
}
////modifiers
modifier address_exist(address _addr){
    <span class="missing-if-branch" title="else path not taken" >E</span>require(_addr != address(0), 'Invalid address!');
    _;
}
&nbsp;
modifier validate_addresses(address _spender,address _owner, uint _id){
    <span class="missing-if-branch" title="else path not taken" >E</span>require(OwnerIs[_id]==_owner ,"owner passed in '_from' has no property with this '_id' to transfer!");
    <span class="missing-if-branch" title="else path not taken" >E</span>require(<span class="branch-0 cbranch-no" title="branch not covered" >approved[_id] == _owner || approved[_id] == _spender</span> || _owner == _spender || <span class="branch-1 cbranch-no" title="branch not covered" >isApprovedbyOwnerForAll[_owner][_spender]</span>,'Not authorized to make a transfer!');
    _;
}
&nbsp;
<span class="fstat-no" title="function not covered" >modifier owner_check(address _owner, uint _id){</span>
<span class="cstat-no" title="statement not covered" >    require(OwnerIs[_id] == _owner,'Only owner can authorize the spender!')</span>;
    _;
}
//functions 
///for contract testing
// function deposit(uint _token_id) public {
//     OwnerIs[_token_id] = msg.sender;
//     BalanceIs[msg.sender] ++;
// }  
&nbsp;
<span class="fstat-no" title="function not covered" >function balance_of() public view returns(uint balance){</span>
<span class="cstat-no" title="statement not covered" >    require(BalanceIs[msg.sender]&gt;0,'Owner has no-fungible property!')</span>;
    balance = BalanceIs[msg.sender]; 
}
// function get_name() public view returns(string memory)
// {  
//     return Name;
// }
// function get_symbol() public view returns(string memory)
// {  
//     return Symbol;
// }
<span class="fstat-no" title="function not covered" >function set_Token_url(uint _token_id, string memory _token_url) public {</span>
    TokenMetaData[_token_id] = _token_url;
}
<span class="fstat-no" title="function not covered" >function get_Token_url(uint _token_id) public view returns(string memory){</span>
<span class="cstat-no" title="statement not covered" >    return TokenMetaData[_token_id];</span>
}
&nbsp;
function owner_of(uint _token_id) public view returns(address owner)
{
    <span class="missing-if-branch" title="else path not taken" >E</span>require(OwnerIs[_token_id] != address(0) ,'No owner exist with that NFT id!');
    owner = OwnerIs[_token_id];
}
&nbsp;
function TransferFrom(address _from, address _to, uint _token_id) <span class="missing-if-branch" title="else path not taken" >E</span>address_exist(_to) <span class="missing-if-branch" title="else path not taken" >E</span>validate_addresses(msg.sender,_from, _token_id) public {
    OwnerIs[_token_id] = _to;
    BalanceIs[_to] ++;
    BalanceIs[_from] --;
    delete approved[_token_id];
}
//when transfer is complete, this function
    ///  checks if `_to` is a smart contract (code size &gt; 0). If so, it calls
    ///  `onERC721Received` on `_to` and throws if the return value is not
    ///  `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`.
&nbsp;
//with DATA
<span class="fstat-no" title="function not covered" >function SafeTransferFrom(address _from, address _to, uint _token_id,bytes calldata _data)  public{</span>
<span class="cstat-no" title="statement not covered" >TransferFrom(_from, _to, _token_id)</span>;
<span class="cstat-no" title="statement not covered" >   require(</span>
            _to.code.length == 0 ||
                IERC721Receiver(_to).onERC721Received(msg.sender, _from, _token_id, _data) ==
                IERC721Receiver.onERC721Received.selector,
            "unsafe recipient"
        );
}
//without DATA
<span class="fstat-no" title="function not covered" >function SafeTransferFrom(address _from, address _to, uint _token_id) public{</span>
<span class="cstat-no" title="statement not covered" >TransferFrom(_from, _to, _token_id)</span>;
<span class="cstat-no" title="statement not covered" >   require(</span>
            _to.code.length == 0 ||
                IERC721Receiver(_to).onERC721Received(msg.sender, _from, _token_id, "") ==
                IERC721Receiver.onERC721Received.selector,
            "unsafe recipient"
        );
}
&nbsp;
<span class="fstat-no" title="function not covered" >function approve(address _approve, uint _token_id) address_exist(_approve) owner_check(msg.sender, _token_id) public </span>
{
    approved[_token_id] = _approve;
}
&nbsp;
<span class="fstat-no" title="function not covered" >function get_approved( uint _token_id) public view returns(address) </span>
{
<span class="cstat-no" title="statement not covered" >    require(OwnerIs[_token_id] != address(0), 'NFT not existed!')</span>;
<span class="cstat-no" title="statement not covered" >    require(approved[_token_id] != address(0), 'Not approved operator!')</span>;
<span class="cstat-no" title="statement not covered" >    return approved[_token_id];</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function set_approval_for_all(address _operator, bool _approved) address_exist(_operator) public</span>
{
<span class="cstat-no" title="statement not covered" >    require(BalanceIs[msg.sender]&gt;0,'Owner has no NFTs to give approval to any operator!')</span>;
    isApprovedbyOwnerForAll[msg.sender][_operator] = _approved;
}
&nbsp;
<span class="fstat-no" title="function not covered" >function Is_approved_for_all(address _owner, address _operator) public view returns(bool)</span>
{
<span class="cstat-no" title="statement not covered" >    require(isApprovedbyOwnerForAll[_owner][_operator], 'Operator not approved for Owner NFTs!')</span>;
<span class="cstat-no" title="statement not covered" >    return isApprovedbyOwnerForAll[_owner][_operator];</span>
}
function mint_token(address _to, uint _token_id) <span class="missing-if-branch" title="else path not taken" >E</span>address_exist(_to) public {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(OwnerIs[_token_id] == address(0),'Token already minted!');
    OwnerIs[_token_id] = _to;
    BalanceIs[_to] += 1;
    emit Transfer(address(0), _to, _token_id);
}
<span class="fstat-no" title="function not covered" >function burn_token(uint _token_id)  public {</span>
<span class="cstat-no" title="statement not covered" >    address owner = OwnerIs[_token_id];</span>
<span class="cstat-no" title="statement not covered" >    require(owner != address(0),'Token not minted!')</span>;
    BalanceIs[owner] -= 1;
    delete OwnerIs[_token_id];
    delete approved[_token_id];
<span class="cstat-no" title="statement not covered" >    emit  Transfer(owner, address(0), _token_id);</span>
}
<span class="fstat-no" title="function not covered" >function Batch_transfer_ERC721(address[] calldata _to, uint256[] calldata _id) public {</span>
<span class="cstat-no" title="statement not covered" >require(_to.length == _id.length, "Receivers and IDs are of different length")</span>;
<span class="cstat-no" title="statement not covered" >for (uint256 i = 0; i &lt; _to.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >SafeTransferFrom(msg.sender, _to[i], _id[i])</span>;
}
}
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Sep 30 2022 15:58:13 GMT+0500 (Pakistan Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
